<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Real Estate Chatbot</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
        <style>
        body {
            font-family: 'Open Sans', sans-serif;
        }

        .chatbot-window {
            width: 320px;
            height: 450px;
            border: 1px solid #ccc;
            position: fixed;
            bottom: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        .chatbot-input {
            display: flex;
            padding: 5px;
            background-color: #f7f7f7;
        }

        .chatbot-input input {
            flex: 1;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            margin-right: 5px;
            outline: none;
        }

        .chatbot-input button {
            padding: 10px 15px;
            border: none;
            background-color: #007BFF;
            color: #fff;
            cursor: pointer;
            border-radius: 5px;
        }

        .chatbot-message {
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 15px;
            max-width: 80%;
            word-break: break-word;
        }

        .chatbot-message.user {
            background-color: #007BFF;
            color: #fff;
            align-self: flex-end;
        }

        .chatbot-message.bot {
            background-color: #e6e6e6;
            color: #333;
        }
    </style>
    
</head>
<body>
    <div class="chatbot-window">
        <div class="chatbot-messages" id="chatbot-messages">
            <!-- Messages will appear here -->
        </div>
        <div class="chatbot-input">
            <input 
                type="text" 
                id="chatbot-input-text"
                placeholder="Type a message..."
            />
            <button id="chatbot-send-btn">Send</button>
        </div>
    </div>

    <script>
        const messagesEl = document.getElementById('chatbot-messages');
        const inputEl = document.getElementById('chatbot-input-text');
        const sendBtn = document.getElementById('chatbot-send-btn');
        let questionIndex = 0;
        let isHandledByAgent = false;
        const questions = [
            "Hello! What type of property are you interested in? (e.g., House, Apartment, Land)",
            "Great! Which location do you prefer?",
            "What's your budget range?",
            "How many bedrooms are you looking for?",
            "Would you like to speak to our agent for more details?"
        ];

        function askNextQuestion() {
            if (questionIndex < questions.length) {
                addMessage(questions[questionIndex], 'bot');
                questionIndex++;
            }
        }

        inputEl.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                sendUserMessage();
            }
        });

        sendBtn.addEventListener('click', sendUserMessage);

        function sendUserMessage() {
            const userMessage = inputEl.value;

            if (userMessage.trim() === '') return;

            // Display user's message
            addMessage(userMessage, 'user');

            if (isHandledByAgent) {
                // Simulate a real user handling the chat
                const agentReply = prompt("You're the agent. Type your response:");
                if (agentReply) {
                    addMessage(agentReply, 'bot');
                }
            } else {
                // Ask the next question or hand over to real user
                if (questionIndex < questions.length) {
                    askNextQuestion();
                } else {
                    const wantsRealUser = confirm("Would you like to chat with a real agent?");
                    if (wantsRealUser) {
                        isHandledByAgent = true;
                        addMessage("You're now connected to a real agent. Please type your questions.", 'bot');
                    }
                }
            }

            inputEl.value = '';
        }

        function addMessage(message, sender) {
            const messageEl = document.createElement('div');
            messageEl.classList.add('chatbot-message', sender);
            messageEl.textContent = message;
            messagesEl.appendChild(messageEl);
            messagesEl.scrollTop = messagesEl.scrollHeight;
        }

        // Start the chat with the first question
        askNextQuestion();
    </script>
</body>
</html>